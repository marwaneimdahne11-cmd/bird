<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nos Oiseaux | Bird Haven</title>
    <meta name="description"
        content="D√©couvrez notre collection d'oiseaux d'exception : perroquets, perruches, canaris et plus.">
    <link rel="stylesheet" href="./styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="page-catalog">
    <header id="main-header" class="scrolled">
        <div class="logo">
            <span class="logo-icon">üê¶</span>
            <a href="index.html">
                <h1>Bird Haven</h1>
            </a>
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="oiseaux.html" class="active">Nos Oiseaux</a></li>
                <li><a href="accessoires.html">Accessoires</a></li>
                <li><a href="guides.html">Guides & Conseils</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
        <div class="header-actions">
            <a href="panier.html" class="cart-btn">
                <i data-lucide="shopping-cart"></i>
                <span id="cart-count">0</span>
            </a>
            <a href="compte.html" class="btn btn-primary btn-sm">Mon Compte</a>
            <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Menu">
                <i data-lucide="menu"></i>
            </button>
        </div>

        <!-- Mobile Navigation Dropdown -->
        <nav class="mobile-nav" id="mobile-nav">
            <ul class="mobile-nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="oiseaux.html" class="active">Nos Oiseaux</a></li>
                <li><a href="accessoires.html">Accessoires</a></li>
                <li><a href="guides.html">Guides & Conseils</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-nav-overlay" id="mobile-nav-overlay"></div>

    <main>
        <!-- Page Header -->
        <section class="page-hero">
            <div class="container">
                <span class="page-badge">ü¶ú Notre Collection</span>
                <h1>Nos Oiseaux d'Exception</h1>
                <p>D√©couvrez notre s√©lection d'oiseaux √©lev√©s avec passion et rigueur par des √©leveurs certifi√©s.</p>
            </div>
        </section>

        <section class="catalog-section container">
            <div class="catalog-controls">
                <div class="filters">
                    <button class="filter-btn active" data-filter="all">
                        <i data-lucide="grid-3x3"></i> Tous
                    </button>
                    <button class="filter-btn" data-filter="Perroquet">Perroquets</button>
                    <button class="filter-btn" data-filter="Canari">Canaris</button>
                    <button class="filter-btn" data-filter="Perruche Ondul√©e">Perruches Ondul√©es</button>
                    <button class="filter-btn" data-filter="Diamant Mandarin">Diamants Mandarins</button>
                </div>
                <div class="sort">
                    <select id="sort-select">
                        <option value="default">Trier par</option>
                        <option value="price-asc">Prix croissant</option>
                        <option value="price-desc">Prix d√©croissant</option>
                    </select>
                </div>
            </div>

            <div id="birds-grid" class="products-grid">
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>Chargement de nos merveilles...</p>
                </div>
            </div>

            <div class="load-more-container" id="load-more-container" style="display: none;">
                <button id="load-more-btn" class="btn btn-outline btn-lg">
                    Charger plus de plumes
                </button>
            </div>
        </section>
    </main>

    <footer>
        <div class="container footer-content">
            <div class="footer-brand">
                <div class="logo">
                    <span class="logo-icon">üê¶</span>
                    <h3>Bird Haven</h3>
                </div>
                <p>Votre partenaire de confiance pour l'univers aviaire depuis 2020.</p>
                <div class="social-links">
                    <a href="#" aria-label="Facebook"><i data-lucide="facebook"></i></a>
                    <a href="https://www.instagram.com/maro__uane__x?igsh=MXg5dHlyNjY0amFicw==" target="_blank"
                        aria-label="Instagram"><i data-lucide="instagram"></i></a>
                    <a href="#" aria-label="YouTube"><i data-lucide="youtube"></i></a>
                </div>
            </div>
            <div class="footer-nav">
                <div class="footer-col">
                    <h4>Navigation</h4>
                    <a href="oiseaux.html">Nos Oiseaux</a>
                    <a href="accessoires.html">Accessoires</a>
                    <a href="guides.html">Guides</a>
                    <a href="contact.html">Contact</a>
                </div>
                <div class="footer-col">
                    <h4>L√©gal</h4>
                    <a href="terms.html">Conditions d'Utilisation</a>
                    <a href="privacy-policy.html">Confidentialit√©</a>
                    <a href="faq.html">FAQ</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Bird Haven. Tous droits r√©serv√©s.</p>
        </div>
    </footer>

    <script type="module">
        import { birdProducts } from './data.js';

        const grid = document.getElementById('birds-grid');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const loadMoreBtn = document.getElementById('load-more-btn');
        const loadMoreContainer = document.getElementById('load-more-container');

        const ITEMS_PER_PAGE = 12;
        let currentPage = 1;
        let currentFilter = 'all';

        function showError(message) {
            grid.innerHTML = `
                <div class="error-state">
                    <i data-lucide="alert-circle"></i>
                    <p>${message}</p>
                    <button onclick="window.location.reload()" class="btn btn-primary btn-sm">R√©essayer</button>
                </div>
            `;
            if (window.lucide) lucide.createIcons();
        }

        function getFilteredData() {
            try {
                return currentFilter === 'all'
                    ? birdProducts
                    : birdProducts.filter(b => b.category === currentFilter);
            } catch (err) {
                console.error("Filter error:", err);
                return [];
            }
        }

        function renderBirds(isNewFilter = false) {
            try {
                const data = getFilteredData();

                if (!data || data.length === 0) {
                    grid.innerHTML = '<p class="empty-msg">Aucun oiseau trouv√© dans cette cat√©gorie.</p>';
                    loadMoreContainer.style.display = 'none';
                    return;
                }

                const start = 0;
                const end = currentPage * ITEMS_PER_PAGE;
                const visibleData = data.slice(start, end);

                grid.innerHTML = visibleData.map(bird => `
                    <div class="product-card" data-category="${bird.category}">
                        <div class="product-image">
                            <img src="${bird.image}" alt="Photo de ${bird.name}" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1555008889-cb982054ff84?auto=format&fit=crop&q=80&w=600'">
                            <span class="product-badge">${bird.category}</span>
                        </div>
                        <div class="product-info">
                            <h3>${bird.name}</h3>
                            <p class="scientific">${bird.scientific}</p>
                            <div class="product-footer">
                                <span class="price">${bird.price} ‚Ç¨</span>
                                <button class="btn btn-primary btn-sm add-to-cart" data-id="${bird.id}">
                                    <i data-lucide="shopping-cart"></i> Ajouter
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');

                // Hide/Show "Load More" button
                if (end >= data.length) {
                    loadMoreContainer.style.display = 'none';
                } else {
                    loadMoreContainer.style.display = 'flex';
                }

                if (window.lucide) lucide.createIcons();
            } catch (err) {
                console.error("Render error:", err);
                showError("D√©sol√©, une erreur est survenue lors de l'affichage du catalogue.");
            }
        }

        // Initialize
        setTimeout(() => {
            renderBirds();
        }, 100);

        // Filter events
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                try {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    currentFilter = btn.dataset.filter;
                    currentPage = 1; // Reset to page 1 on filter change
                    renderBirds(true);
                } catch (err) {
                    console.error("Filter click error:", err);
                }
            });
        });

        // Load more event
        loadMoreBtn.addEventListener('click', () => {
            currentPage++;
            renderBirds();
        });
    </script>
    <script src="./cart.js"></script>
    <script src="./app.js"></script>
    <script>lucide.createIcons();</script>
</body>

</html>